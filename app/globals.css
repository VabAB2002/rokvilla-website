@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: Arial, Helvetica, sans-serif;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background: #555;
}

/* Hide scrollbar for scroll snap sections while maintaining functionality */
.snap-y::-webkit-scrollbar {
  display: none;
}

.snap-y {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Optimize scroll snap for better performance */
.snap-y {
  scroll-snap-type: y mandatory;
  overscroll-behavior-y: contain;
  -webkit-overflow-scrolling: touch;
}

/* Tablet and Desktop - keep mandatory snapping with smooth scroll */
@media (min-width: 769px) {
  .snap-y {
    scroll-snap-type: y mandatory;
    scroll-behavior: smooth;
  }
}

/* Optimize scroll performance on all devices */
.snap-y {
  /* Hardware acceleration for scroll container */
  transform: translate3d(0, 0, 0);
  -webkit-transform: translate3d(0, 0, 0);
  /* Smooth momentum scrolling */
  -webkit-overflow-scrolling: touch;
  /* Prevent scroll chaining */
  overscroll-behavior-y: contain;
}

/* Mobile-specific scroll container optimization */
@media (max-width: 768px) {
  .overflow-y-auto {
    /* Maximum performance settings */
    scroll-behavior: auto !important;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    /* Faster scroll rendering */
    will-change: scroll-position;
  }
}

/* Ensure proper height for iOS Safari and mobile browsers */
@supports (-webkit-touch-callout: none) {
  .h-screen {
    height: -webkit-fill-available;
  }
}

/* Mobile-specific: Ensure min-h-screen sections also respect mobile viewport */
@supports (-webkit-touch-callout: none) {
  .min-h-screen {
    min-height: -webkit-fill-available;
  }
}

/* Mobile touch scrolling */
body {
  overscroll-behavior-y: none;
}

/* Improve touch scrolling performance */
* {
  -webkit-tap-highlight-color: transparent;
}

/* Performance optimizations - GPU acceleration for transforms and animations */
@layer utilities {
  .gpu-accelerate {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
}

/* Optimize animations for better performance */
@media (prefers-reduced-motion: no-preference) {
  * {
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Optimize image loading */
img {
  content-visibility: auto;
}

/* Optimize video performance */
video {
  content-visibility: auto;
  contain: layout style paint;
}

/* Mobile scrolling optimizations - Maximum performance */
@media (max-width: 768px) {
  /* Remove scroll snap entirely on mobile for maximum speed */
  .snap-y {
    scroll-snap-type: none !important;
    scroll-behavior: auto;
  }
  
  /* Disable scroll snap on sections */
  [data-scroll-section] {
    scroll-snap-align: none;
    scroll-snap-stop: normal;
  }
  
  /* Optimize section heights on mobile to account for browser UI */
  .min-h-screen {
    min-height: 100vh;
    min-height: 100svh; /* Small viewport height - excludes browser UI */
  }
  
  /* Adjust padding for better mobile spacing */
  section.min-h-screen {
    padding-top: 5rem; /* Account for fixed navbar */
    padding-bottom: 2rem;
  }
  
  /* Reduce animation overhead during scroll */
  * {
    will-change: auto !important;
  }
  
  /* Maximize scroll performance */
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* For very small mobile screens */
@media (max-width: 640px) {
  /* Reduce animation distances for smaller screens */
  section.min-h-screen {
    padding-top: 4rem;
  }
}

/* Tablet optimizations (768px - 1024px) */
@media (min-width: 768px) and (max-width: 1024px) {
  body {
    font-size: 16px;
  }
  
  /* Adjust section padding for tablets */
  section.min-h-screen {
    padding-top: 6rem;
    padding-bottom: 3rem;
  }
  
  /* Optimize touch targets */
  button, a {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Large tablet optimizations (1024px - 1280px) */
@media (min-width: 1024px) and (max-width: 1280px) {
  body {
    font-size: 17px;
  }
  
  section.min-h-screen {
    padding-top: 6rem;
    padding-bottom: 3rem;
  }
}

/* Touch-friendly button and link sizing for all mobile devices */
@media (max-width: 1280px) {
  /* Minimum touch target size (44x44px per Apple/Google guidelines) */
  button:not(.no-touch-size),
  a.btn,
  input[type="submit"],
  input[type="button"],
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Improve form element sizing */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="password"],
  select,
  textarea {
    font-size: 16px; /* Prevents iOS zoom on focus */
    min-height: 44px;
  }
  
  /* Better tap feedback */
  button:active,
  a:active {
    opacity: 0.7;
    transform: scale(0.98);
  }
}

/* Improved momentum scrolling for iOS */
@supports (-webkit-overflow-scrolling: touch) {
  .snap-y {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Optimize section scrolling */
  section {
    overflow-anchor: none;
  }
}

/* Reduce motion and complexity during active scrolling for better performance */
@media (max-width: 1024px) {
  /* Disable complex transforms during scroll on mobile/tablet */
  .scrolling * {
    transition-duration: 0ms !important;
    animation: none !important;
    transform: none !important;
  }
  
  /* Reduce paint areas during scroll */
  .scrolling section {
    pointer-events: none;
  }
}

/* Better viewport handling for mobile browsers */
@supports (height: 100dvh) {
  .h-screen {
    height: 100dvh; /* Dynamic viewport height - adjusts for browser chrome */
  }
  
  .min-h-screen {
    min-height: 100dvh;
  }
}

/* Optimize for touch devices */
@media (hover: none) and (pointer: coarse) {
  /* Remove hover effects on touch devices */
  *:hover {
    transition-duration: 0.01ms;
  }
  
  /* Add active state feedback instead */
  button:active,
  a:active,
  [role="button"]:active {
    opacity: 0.8;
  }
}

/* Landscape mode optimization for mobile */
@media (max-width: 1024px) and (orientation: landscape) {
  .min-h-screen {
    min-height: 100vh;
  }
  
  /* Reduce vertical padding in landscape */
  section.min-h-screen {
    padding-top: 3rem;
    padding-bottom: 1.5rem;
  }
  
  /* No snap in landscape for maximum speed */
  .snap-y {
    scroll-snap-type: none !important;
  }
}

/* Ultra-fast scrolling mode for mobile */
@media (max-width: 768px) {
  /* Disable expensive CSS features during page load */
  html {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
  
  /* Optimize rendering layers */
  section > * {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
}

/* Prevent scroll jank by reducing repaints */
@media (max-width: 768px) {
  section {
    contain: layout style paint;
  }
  
  /* Optimize fixed elements during scroll */
  nav {
    will-change: transform;
    transform: translateZ(0);
  }
  
  /* Aggressive optimization for scroll performance */
  img, video {
    pointer-events: none;
  }
  
  /* Reduce complexity of motion elements */
  .motion-safe\:animate-bounce {
    animation: none !important;
  }
  
  /* Speed up all transitions on mobile */
  * {
    transition-duration: 0.15s !important;
  }
  
  /* Remove hover delays */
  a, button {
    -webkit-tap-highlight-color: transparent;
  }
}
